function importFolders(){console.log("Chau");var t=new XMLHttpRequest;t.open("GET","../../Views/folder.php",!0),t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){var e=JSON.parse(t.responseText);console.log(e.backend)}}}const container=$("#list-folders");var auth=!1;function authenticated(){if(!1===auth){$("main").hasClass("hidden")||$("main").addClass("hidden");$("#login-screen").append('<form class="form container" method="POST">\n                        <fieldset>\n                            <legend>Username & Password</legend>\n\n                            <label for="username">Username</label>\n                            <input  type="text" name="user[username]" placeholder="Your username" id="username">\n\n                            <label for="password">Password</label>\n                            <input type="password" name="user[contra]" placeholder="Your password" id="password">\n\n                        </fieldset>\n                        <input id="login-button" type="submit" value="Login">\n                        </form>'),$("#login-button").click((function(t){if(t.preventDefault(),""===$("#username").val()||""===$("#password").val())alert("Username and Password are mandatory");else{var e={action:"Auth",user:{username:$("#username").val(),password:$("#password").val()}};$.post("Router.php",e,(function(t){null===JSON.parse(t)?($("main").removeClass("hidden"),auth=!0,$("#login-screen").html(""),showFolders(),clickFolder(),clickActivity()):alert(JSON.parse(t)[0])}))}}))}}function showFolders(){$("#folder").click((function(){const t=$("#folders-container");if(t.hasClass("hidden")){t.addClass("visible"),t.removeClass("hidden");const e=$("#items-container"),i=$("#list-path");e.hasClass("visible")&&(e.addClass("hidden"),e.removeClass("visible"),i.addClass("hidden"),i.removeClass("visible"))}})),$("#folders-container").hasClass("visible")&&importFolders()}function importFolders(){const t=$("#list-folders");t.html("");$.get("Router.php",{action:"viewFolders"},(function(e){JSON.parse(e).forEach((function(e){var i=`<li class="li-folders">\n                            <p class="title">${e.name}</p>\n                            <input do="View" folderId='${e.id}' type="button" class="folder-delete discret-button" value="View items">\n                            <input do="Remove" folderId='${e.id}' type="button" class="folder-delete discret-button" value="Remove">\n                        </li>`;t.append(i)}))}))}function addFolder(){var t={action:"addFolder",folder:{name:$("#folderName").val()}};$.post("Router.php",t,(function(){importFolders(),$("#folderName").val("")}))}function clickFolder(){$("#folders-container").click((function(t){t.preventDefault(),["id"]in t.target.attributes&&"folder-add"===t.target.attributes.id.value?addFolder():"View"===t.target.attributes.do.value?viewFolder(t.target.attributes.folderId.value):"Remove"===t.target.attributes.do.value&&deleteFolder(t.target.attributes.folderId.value)}))}function deleteFolder(t){var e={action:"deleteFolder",folder:{id:t}};$.post("Router.php",e,(function(){importFolders()}))}function viewFolder(t){var e={action:"viewFolder",folder:{id:t}};$.post("Router.php",e,(function(e){viewList(JSON.parse(e),t)}))}function viewList(t){list=t[0],folderInfo=t[1],$("#list-path").text(" > "+folderInfo.name),$("#list-path").attr("idFolder",folderInfo.id);const e=$("#folders-container");e.hasClass("visible")&&(e.addClass("hidden"),e.removeClass("visible"));const i=$("#items-container"),a=$("#list-path");i.hasClass("hidden")&&(i.addClass("visible"),i.removeClass("hidden"),a.addClass("visible"),a.removeClass("hidden"));const s=$("#list-activities");s.html(""),list.forEach((function(t){var e="";1==t.status&&(e="checked");var i=`<li class="li-items">\n                        <form class="activity">\n                            <input do="changeStatus"class="check" ${e} type="checkbox" activityStatus='${t.status}' activityId='${t.id}' value="1">\n                            <label>${t.name}</label>\n                        </form>\n                        <input do="Edit" activityId='${t.id}' type="button" class="discret-button" value="Edit">\n                    </li>`;s.append(i)}))}function clickActivity(){$("#items-container").click((function(t){t.preventDefault(t.target.attributes),["id"]in t.target.attributes&&"activity-add"===t.target.attributes.id.value?addActivity($("#list-path").attr("idFolder")):"Edit"===t.target.attributes.do.value?viewActivity(t.target.attributes.activityId.value):"changeStatus"===t.target.attributes.do.value&&changeStatus(t.target.attributes.activityId.value,t.target.attributes.activityStatus.value)}))}function addActivity(t){var e={action:"addActivity",activity:{name:$("#activityName").val(),idFolder:t,status:0}};$.post("Router.php",e,(function(i){$("#activityName").val(""),e={action:"viewFolder",folder:{id:t}},$.post("Router.php",e,(function(e){viewList(JSON.parse(e),t)}))}))}function viewActivity(t){const e=$("#items-container"),i=$("#list-path");if(e.hasClass("visible")){e.addClass("hidden"),e.removeClass("visible"),i.addClass("hidden"),i.removeClass("visible");const t=$("#editing-activities");t.hasClass("hidden")&&(t.addClass("visible"),t.removeClass("hidden")),$("#folder").addClass("hidden"),$("#folder").removeClass("visible")}var a={action:"viewActivity",activity:{id:t}};const s=$("#editing-activities");$.post("Router.php",a,(function(t){var e=JSON.parse(t),i=`\n                    <h4>Editing "${e.name}"</h4>\n                    <input  id="newName" activityId='${e.id}' type="text" placeholder='${e.name}'>\n                    <button do="Save" type="submit">Save</button>\n                    <button do="Cancel" type="submit">Cancel</button>`;s.html(i),editActivity(s,e.idFolder)}))}function changeStatus(t,e){var i={action:"editActivity",activity:{id:t,status:0==e?1:0}};$.post("Router.php",i,(function(){var t={id:$("#list-path").attr("idFolder")};i={action:"viewFolder",folder:t},$.post("Router.php",i,(function(t){viewList(JSON.parse(t),$("#list-path").attr("idFolder"))}))}))}function editActivity(t,e){t.click((function(i){if(i.preventDefault(),"Save"===i.target.attributes.do.value){var a={action:"editActivity",activity:{id:$("#newName").attr("activityId"),name:$("#newName").val()}};$.post("Router.php",a,(function(){t.removeClass("visible"),t.addClass("hidden"),$("#folder").addClass("visible"),$("#folder").removeClass("hidden"),a={action:"viewFolder",folder:{id:e}},$.post("Router.php",a,(function(t){viewList(JSON.parse(t),e)}))}))}else if("Cancel"===i.target.attributes.do.value){t.removeClass("visible"),t.addClass("hidden"),$("#folder").addClass("visible"),$("#folder").removeClass("hidden");a={action:"viewFolder",folder:{id:e}};$.post("Router.php",a,(function(t){viewList(JSON.parse(t),e)}))}}))}$(document).ready((function(){authenticated()}));
//# sourceMappingURL=bundle.js.map
