{"version":3,"sources":["app.js"],"names":["auth","page","authenticated","$","append","click","e","preventDefault","val","alert","info","action","user","username","password","post","data","JSON","parse","html","showFolders","importFolders","container","get","forEach","folder","script","addFolder","name","target","id","attributes","value","addActivity","attr","deleteFolder","viewFolder","viewActivity","changeStatus","activity","idFolder","viewList","result","list","folderInfo","listContainer","status","listId","d","item","document","ready"],"mappings":"AAAA,IAAAA,MAAA,EACAC,KAAA,EAMA,SAAAC,gBACA,IAAA,IAAAF,KAAA,CAgBAG,EAAA,QAAAC,OAfA,yxBAgBAD,EAAA,iBAAAE,OAAA,SAAAC,GAEA,GADAA,EAAAC,iBACA,KAAAJ,EAAA,aAAAK,OAAA,KAAAL,EAAA,aAAAK,MACAC,MAAA,2CACA,CACA,IAIAC,EAAA,CACAC,OAAA,OACAC,KANA,CACAC,SAAAV,EAAA,aAAAK,MACAM,SAAAX,EAAA,aAAAK,QAMAL,EAAAY,KAAA,aAAAL,GAAA,SAAAM,GACA,OAAAC,KAAAC,MAAAF,IACAhB,MAAA,EACAG,EAAA,QAAAgB,KAAA,IACAd,QACAe,eAEAX,MAAAQ,KAAAC,MAAAF,GAAA,YASA,SAAAI,cACA,GAAA,IAAAnB,KAAA,CAcAE,EAAA,QAAAC,OAbA,iqBAcAiB,iBAKA,SAAAA,gBACA,MAAAC,EAAAnB,EAAA,iBACAmB,EAAAH,KAAA,IAIAhB,EAAAoB,IAAA,aAHA,CACAZ,OAAA,gBAEA,SAAAK,GACAC,KAAAC,MAAAF,GACAQ,SAAA,SAAAC,GACA,IAAAC,EAAA,yEACAD,EAAA,oEACAA,EAAA,wIACAA,EAAA,wGAEAH,EAAAlB,OAAAsB,SAOA,SAAAC,YACA,IAGAjB,EAAA,CACAC,OAAA,YACAc,OALA,CACAG,KAAAzB,EAAA,eAAAK,QAMAL,EAAAY,KAAA,aAAAL,GAAA,WACAP,EAAA,QAAAgB,KAAA,IACAC,iBAMA,SAAAf,QACAF,EAAA,QAAAE,OAAA,SAAAC,GAEA,GADAA,EAAAC,iBACA,WAAAD,EAAAuB,OAAAC,GACA3B,EAAA,QAAAgB,KAAA,IACAlB,KAAA,EACAmB,mBAEA,GAAA,CAAA,QAAAd,EAAAuB,OAAAE,YAAA,eAAAzB,EAAAuB,OAAAE,WAAA,GAAAC,MACAL,iBAEA,GAAA,CAAA,QAAArB,EAAAuB,OAAAE,YAAA,iBAAAzB,EAAAuB,OAAAE,WAAA,GAAAC,MACAC,YAAA9B,EAAA,cAAA+B,KAAA,kBAEA,GAAA,WAAA5B,EAAAuB,OAAAE,WAAA,GAAAC,MACAG,aAAA7B,EAAAuB,OAAAE,WAAA,SAAAC,YAEA,GAAA,SAAA1B,EAAAuB,OAAAE,WAAA,GAAAC,MACAI,WAAA9B,EAAAuB,OAAAE,WAAA,SAAAC,YAEA,GAAA,SAAA1B,EAAAuB,OAAAE,WAAA,GAAAC,MACA/B,KAAA,EACAoC,aAAA/B,EAAAuB,OAAAE,WAAA,WAAAC,YAEA,GAAA,iBAAA1B,EAAAuB,OAAAE,WAAA,GAAAC,MACAM,aAAAhC,EAAAuB,OAAAE,WAAA,WAAAC,MAAA1B,EAAAuB,OAAAE,WAAA,eAAAC,YAEA,GAAA,SAAA1B,EAAAuB,OAAAE,WAAA,GAAAC,MAAA,CACA,IAIAtB,EAAA,CACAC,OAAA,eACA4B,SANA,CACAT,GAAA3B,EAAA,YAAA+B,KAAA,cACAN,KAAAzB,EAAA,YAAAK,QAMAL,EAAAY,KAAA,aAAAL,GAAA,WACA,IAAA8B,EAAArC,EAAA,MAAA+B,KAAA,YAIAxB,EAAA,CACAC,OAAA,aACAc,OALA,CACAK,GAAAU,IAMArC,EAAAY,KAAA,aAAAL,GAAA,SAAAM,GACAb,EAAA,QAAAgB,KAAA,IACAlB,KAAA,EACAwC,SAAAxB,KAAAC,MAAAF,GAAAwB,cAIA,GAAA,WAAAlC,EAAAuB,OAAAE,WAAA,GAAAC,MAAA,CACA,IAAAQ,EAAArC,EAAA,MAAA+B,KAAA,YAIAxB,EAAA,CACAC,OAAA,aACAc,OALA,CACAK,GAAAU,IAMArC,EAAAY,KAAA,aAAAL,GAAA,SAAAM,GACAb,EAAA,QAAAgB,KAAA,IACAlB,KAAA,EACAwC,SAAAxB,KAAAC,MAAAF,GAAAwB,UAOA,SAAAL,aAAAL,GACA,IAGApB,EAAA,CACAC,OAAA,eACAc,OALA,CACAK,GAAAA,IAMA3B,EAAAY,KAAA,aAAAL,GAAA,WACAP,EAAA,QAAAgB,KAAA,IACAC,iBAMA,SAAAgB,WAAAN,GACA,IAGApB,EAAA,CACAC,OAAA,aACAc,OALA,CACAK,GAAAA,IAMA3B,EAAAY,KAAA,aAAAL,GAAA,SAAAM,GACAf,KAAA,EACAwC,SAAAxB,KAAAC,MAAAF,GAAAc,MAMA,SAAAW,SAAAC,GAGA,GAFAC,KAAAD,EAAA,GACAE,WAAAF,EAAA,GACA,IAAAzC,KAAA,CACAE,EAAA,QAAAgB,KAAA,IACA,IAAAO,EAAA,wHACAkB,WAAA,2CAAAA,WAAA,ooBAaAzC,EAAA,QAAAC,OAAAsB,GACA,MAAAmB,EAAA1C,EAAA,oBACAwC,KAAAnB,SAAA,SAAAe,GACA,IAAAO,EAAA,GACA,GAAAP,EAAA,SACAO,EAAA,WAEA,IAAApB,EAAA,qJAEAoB,qCAAAP,EAAA,uBAAAA,EAAA,0DACAA,EAAA,+GAEAA,EAAA,wFAEAM,EAAAzC,OAAAsB,OAOA,SAAAO,YAAAc,GACA,IAKArC,EAAA,CACAC,OAAA,cACA4B,SAPA,CACAX,KAAAzB,EAAA,iBAAAK,MACAgC,SAAAO,EACAD,OAAA,IAMA3C,EAAAY,KAAA,aAAAL,GAAA,SAAAsC,GACA7C,EAAA,iBAAAK,IAAA,IAIAE,EAAA,CACAC,OAAA,aACAc,OALA,CACAK,GAAAiB,IAMA5C,EAAAY,KAAA,aAAAL,GAAA,SAAAM,GACAf,KAAA,EACAwC,SAAAxB,KAAAC,MAAAF,GAAA+B,SAMA,SAAAV,aAAAP,GACA,GAAA,IAAA7B,KAAA,CACAE,EAAA,QAAAgB,KAAA,IACA,IAGAT,EAAA,CACAC,OAAA,eACA4B,SALA,CACAT,GAAAA,IAMA3B,EAAA,uBACAA,EAAAY,KAAA,aAAAL,GAAA,SAAAM,GACA,IAAAiC,EAAAhC,KAAAC,MAAAF,GACAU,EAAA,gJAEAuB,EAAA,sBAAAA,EAAA,gFACAA,EAAA,gCAAAA,EAAA,+OAKA9C,EAAA,QAAAC,OAAAsB,OAMA,SAAAY,aAAAR,EAAAgB,GACA,IAUApC,EAAA,CACAC,OAAA,eACA4B,SANA,CACAT,GAAAA,EACAgB,OAPA,GAAAA,EACA,EAEA,IAUA3C,EAAAY,KAAA,aAAAL,GAAA,WACA,IAAAe,EAAA,CACAK,GAAA3B,EAAA,cAAA+B,KAAA,aAEAxB,EAAA,CACAC,OAAA,aACAc,OAAAA,GAEAtB,EAAAY,KAAA,aAAAL,GAAA,SAAAM,GACAf,KAAA,EACAwC,SAAAxB,KAAAC,MAAAF,GAAAb,EAAA,cAAA+B,KAAA,mBA5UA/B,EAAA+C,UAAAC,OAAA,WACAjD","file":"bundle.js","sourcesContent":["var auth=false;\r\nvar page=0; //0 for Folders, 1 for List, 2 for Edit\r\n$(document).ready(function(){\r\n    authenticated();//Login\r\n});\r\n\r\n//Login\r\nfunction authenticated(){\r\n    if(auth===false){\r\n        var script=`<div id=\"login-screen\" class=\"login\">\r\n                        <form class=\"form container\" method=\"POST\">\r\n                            <fieldset>\r\n                                <legend>Username & Password</legend>\r\n\r\n                                <label for=\"username\">Username</label>\r\n                                <input  type=\"text\" name=\"user[username]\" placeholder=\"Your username\" id=\"username\">\r\n\r\n                                <label for=\"password\">Password</label>\r\n                                <input type=\"password\" name=\"user[contra]\" placeholder=\"Your password\" id=\"password\">\r\n\r\n                            </fieldset>\r\n                            <input id=\"login-button\" type=\"submit\" value=\"Login\">\r\n                        </form>\r\n                    </div> `;\r\n        $('main').append(script);\r\n        $(\"#login-button\").click(function(e){\r\n            e.preventDefault();\r\n            if($(\"#username\").val()===\"\" || $(\"#password\").val()===\"\"){\r\n                alert(\"Username and Password are mandatory\")\r\n            }else{\r\n                var user={\r\n                    username: $(\"#username\").val(),\r\n                    password:$(\"#password\").val(),\r\n                }\r\n                var info={\r\n                    action: \"Auth\",\r\n                    user:user,\r\n                }\r\n                $.post(\"Router.php\",info,function(data){\r\n                    if(JSON.parse(data)===null){\r\n                        auth=true;\r\n                        $('main').html(\"\");\r\n                        click();\r\n                        showFolders();\r\n                    }else{\r\n                        alert(JSON.parse(data)[0]);\r\n                    }\r\n                })\r\n            }\r\n        })\r\n    }\r\n}\r\n//Funcion para monitorear el click en main, y derivar a donde clickea\r\n\r\nfunction showFolders(){ //Show the list of folders\r\n    if(page===0){\r\n        var script=`<div class=\"path\">\r\n                        <h4 id=\"folder\" class=\"show-folders\">Folders</h4>\r\n                    </div>\r\n                    <div class=\"content\">\r\n                        <div id=\"folders-container\" class=\"folder\">\r\n                            <ul id=\"list-folders\"class=\"folders\">   \r\n                            </ul>\r\n                            <form class=\"add-button\">\r\n                                <input type=\"text\" id=\"folderName\" placeholder=\"New Folder\">\r\n                                <button  id=\"folder-add\" type=\"submit\">Add</button>\r\n                            </form>\r\n                        </div>\r\n                    </div>`;\r\n        $('main').append(script);\r\n        importFolders(); //Call a function to get folders\r\n    }\r\n}\r\n\r\n//Get folders from database\r\nfunction importFolders(){\r\n    const container= $('#list-folders');\r\n    container.html(\"\");\r\n    var info={\r\n        action: \"viewFolders\",\r\n    }\r\n    $.get(\"Router.php\",info,function(data){\r\n        var result= JSON.parse(data);\r\n        result.forEach(function(folder){\r\n            var script=`<li class=\"li-folders\">\r\n                            <p class=\"title\">${folder[\"name\"]}</p>\r\n                            <input do=\"View\" folderId='${folder[\"id\"]}' type=\"button\" class=\"folder-delete discret-button\" value=\"View items\">\r\n                            <input do=\"Remove\" folderId='${folder[\"id\"]}' type=\"button\" class=\"folder-delete discret-button\" value=\"Remove\">\r\n                        </li>`;\r\n            container.append(script);\r\n        })\r\n    })\r\n}\r\n\r\n\r\n//Send backend an input to create a folder\r\nfunction addFolder(){\r\n    var folder={\r\n        name:$('#folderName').val(),\r\n    }\r\n    var info={\r\n        action: \"addFolder\",\r\n        folder:folder,\r\n    }\r\n    $.post(\"Router.php\",info,function(){\r\n        $(\"main\").html(\"\");\r\n        showFolders();\r\n    }); \r\n}\r\n\r\n\r\n//Check where the user clicks in order to call the appropiate function\r\nfunction click(){\r\n    $(\"main\").click(function(e){\r\n        e.preventDefault();\r\n        if(e.target.id===\"folder\"){ //Click to see folders?\r\n            $('main').html(\"\");\r\n            page=0;\r\n            showFolders();\r\n        }\r\n        else if([\"id\"] in e.target.attributes && e.target.attributes[\"id\"].value===\"folder-add\"){ //Click to add a folder?\r\n            addFolder();\r\n        }\r\n        else if([\"id\"] in e.target.attributes && e.target.attributes[\"id\"].value===\"activity-add\"){//Click to add an activity?\r\n            addActivity($('#list-path').attr(`idFolder`));\r\n        }\r\n        else if(e.target.attributes[\"do\"].value===\"Remove\"){//Click to delete a folder?\r\n            deleteFolder(e.target.attributes[\"folderId\"].value);\r\n        }\r\n        else if(e.target.attributes[\"do\"].value===\"View\"){//Click to see the activities of a folder?\r\n            viewFolder(e.target.attributes[\"folderId\"].value);\r\n        }\r\n        else if(e.target.attributes[\"do\"].value===\"Edit\"){//Click to edit an activity?\r\n            page=2;\r\n            viewActivity(e.target.attributes[\"activityId\"].value);\r\n        }\r\n        else if(e.target.attributes[\"do\"].value===\"changeStatus\"){//Click to change activity status?\r\n            changeStatus(e.target.attributes[\"activityId\"].value,e.target.attributes[\"activityStatus\"].value);\r\n        }\r\n        else if(e.target.attributes[\"do\"].value===\"Save\"){//Click to save a new activity name\r\n            var activity={\r\n                \"id\":$('#newName').attr(\"activityId\"),\r\n                \"name\":$('#newName').val()\r\n            }\r\n            var info={\r\n                action:\"editActivity\",\r\n                activity:activity,\r\n            }\r\n            $.post(\"Router.php\",info,function(){\r\n                var idFolder= $(\"h4\").attr(\"idFolder\");\r\n                var folder={\r\n                    \"id\":idFolder,\r\n                }\r\n                info={\r\n                    action:\"viewFolder\",\r\n                    folder:folder,\r\n                }\r\n                $.post(\"Router.php\",info,function(data){\r\n                    $('main').html(\"\");\r\n                    page=1;\r\n                    viewList(JSON.parse(data),idFolder)\r\n                }); \r\n            })  \r\n        }\r\n        else if(e.target.attributes[\"do\"].value===\"Cancel\"){//Click to come back and do not save a new activiy name?\r\n            var idFolder= $(\"h4\").attr(\"idFolder\");\r\n            var folder={\r\n                \"id\":idFolder,\r\n            }\r\n            var info={\r\n                action:\"viewFolder\",\r\n                folder:folder,\r\n            }\r\n            $.post(\"Router.php\",info,function(data){\r\n                $('main').html(\"\");\r\n                page=1;\r\n                viewList(JSON.parse(data),idFolder);\r\n            });\r\n        }\r\n    })\r\n}\r\n\r\n//Delete a folder, sending backed the id\r\nfunction deleteFolder(id){\r\n    var folder={\r\n        \"id\":id,\r\n    }\r\n    var info={\r\n        action:\"deleteFolder\",\r\n        folder:folder,\r\n    }\r\n    $.post(\"Router.php\",info,function(){\r\n        $(\"main\").html(\"\");\r\n        showFolders();\r\n    });\r\n}\r\n\r\n\r\n//Get from database the list of to-do items from the selected folder\r\nfunction viewFolder(id){\r\n    var folder={\r\n        \"id\":id,\r\n    }\r\n    var info={\r\n        action: \"viewFolder\",\r\n        folder:folder,\r\n    }\r\n    $.post(\"Router.php\",info,function(data){\r\n        page=1;\r\n        viewList(JSON.parse(data),id);//Calls the function to get the items\r\n    });\r\n}\r\n\r\n\r\n//Get the items from de database\r\nfunction viewList(result){\r\n    list= result[0];\r\n    folderInfo= result[1];\r\n    if(page===1){\r\n        $('main').html(\"\");\r\n        var script=`<div class=\"path\">\r\n                        <h4><span id=\"folder\" class=\"show-folders\">Folders</span><span idFolder=\"${folderInfo[\"id\"]}\" id=\"list-path\" class=\"show-list\"> > ${folderInfo[\"name\"]}</h4>\r\n                    </div>\r\n                    <div class=\"content\">\r\n                        <div id=\"items-container\" class=\"to-do_items\">\r\n                            <p>To-Do items</p>\r\n                            <ul id=\"list-activities\" class=\"activities\">\r\n                            </ul>\r\n                            <form class=\"add-button\">\r\n                                <input id=\"activityName\" type=\"text\" placeholder=\"New Task\">\r\n                                <button id=\"activity-add\" type=\"submit\">Add</button>\r\n                            </form>\r\n                        </div>\r\n                    </div>`;\r\n        $('main').append(script);\r\n        const listContainer= $('#list-activities');\r\n        list.forEach(function(activity){\r\n            var status=\"\";\r\n            if(activity[\"status\"]==1){\r\n                status=\"checked\"\r\n            }\r\n            var script=`<li class=\"li-items\">\r\n                            <form class=\"activity\">\r\n                                <input do=\"changeStatus\"class=\"check\" ${status} type=\"checkbox\" activityStatus='${activity[\"status\"]}' activityId='${activity[\"id\"]}' value=\"1\">\r\n                                <label>${activity[\"name\"]}</label>\r\n                            </form>\r\n                            <input do=\"Edit\" activityId='${activity[\"id\"]}' type=\"button\" class=\"discret-button\" value=\"Edit\">\r\n                        </li>`;\r\n        listContainer.append(script);\r\n    })\r\n    }  \r\n}\r\n\r\n\r\n//Send backend an input to create a to-do item in the selected folder\r\nfunction addActivity(listId){\r\n    var activity={\r\n        \"name\":$('#activityName').val(),\r\n        \"idFolder\":listId,\r\n        \"status\":0,\r\n    }\r\n    var info={\r\n        action:\"addActivity\",\r\n        activity: activity,\r\n    }\r\n    $.post(\"Router.php\",info,function(d){\r\n        $('#activityName').val(\"\");\r\n        var folder={\r\n            \"id\":listId,\r\n        }\r\n        info={\r\n            action:\"viewFolder\",\r\n            folder: folder,\r\n        }\r\n        $.post(\"Router.php\",info,function(data){\r\n            page=1;\r\n            viewList(JSON.parse(data),listId)\r\n        }); \r\n    }); \r\n}\r\n\r\n//Get the id and name of an activity to show on edit container\r\nfunction viewActivity(id){\r\n    if(page===2){\r\n        $('main').html(\"\");\r\n        var activity={\r\n            \"id\":id,\r\n        }\r\n        var info={\r\n            action:\"viewActivity\",\r\n            activity:activity,\r\n        }\r\n        const edit= $('#editing-activities')\r\n        $.post(\"Router.php\",info,function(data){\r\n            var item= JSON.parse(data);\r\n            var script=`<div class=\"content\">\r\n                            <div id=\"editing-activities\" class=\"edit\">\r\n                                <h4 idFolder=\"${item[\"idFolder\"]}\">Editing \"${item['name']}\"</h4>\r\n                                <input  id=\"newName\" activityId='${item[\"id\"]}' type=\"text\" placeholder='${item[\"name\"]}'>\r\n                                <button do=\"Save\" type=\"submit\">Save</button>\r\n                                <button do=\"Cancel\" type=\"submit\">Cancel</button>\r\n                            </div>\r\n                        </div>`;\r\n            $('main').append(script);\r\n        })\r\n    }\r\n}\r\n\r\n//Send backend the order to change the item status from checked to unchecked and vice versa\r\nfunction changeStatus(id,status){\r\n    var statusChanged;\r\n    if(status==0){\r\n        statusChanged=1;\r\n    }else{\r\n        statusChanged=0;\r\n    }\r\n    var activity={\r\n        \"id\":id,\r\n        \"status\":statusChanged\r\n    }\r\n    var info={\r\n        action:\"editActivity\",\r\n        activity:activity,\r\n    }\r\n    $.post(\"Router.php\",info,function(){\r\n        var folder={\r\n            \"id\":$('#list-path').attr(`idFolder`),\r\n        }\r\n        info={\r\n            action:\"viewFolder\",\r\n            folder:folder,\r\n        }\r\n        $.post(\"Router.php\",info,function(data){\r\n            page=1;\r\n            viewList(JSON.parse(data),$('#list-path').attr(`idFolder`))\r\n        }); \r\n    })\r\n}\r\n\r\n"]}